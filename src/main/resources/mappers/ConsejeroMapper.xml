<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="com.projectKepler.persistence.mybatis.mappers.ConsejeroMapper">
    <select parameterType="map" id="loadAllConsejeros" resultMap="ConsejeroResult"> 
        select

            c.nombre,
            c.codigo,
        
            s.numero as Solicitud_numero,
            s.justificacion as Solicitud_justificacion,
            s.impacto as Solicitud_impacto,
            s.proyeccion as Solicitud_proyeccion,
            s.comentarios as Solicitud_comentarios,
            s.estado as Solicitud_estado,
            s. acuseRecibo as Solicitud_acuseRecibo,
            s.Asignatura_Cancelar as Solicitud_Asignatura_Cancelar,
            s.avalConsejero as Solicitud_avalConsejero, 
            s.Estudiante_codigo as Solicitud_Estudiante_codigo,
        
            e.codigo as Estudiante_codigo,
            e.nombre as Estudiante_nombre,
            e.programa as Estudiante_programa,
            e.doblePrograma as Estudiante_doblePrograma,
            e.numeroPlanEstudio as Estudiante_numeroPlanEstudio, 
            e.numeroMatriculas as Estudiante_numeroMatriculas,
            e.correo as Estudiante_correo,
            e.ConsejeroAcademico_codigo as Estudiante_ConsejeroAcademico_codigo,
            e.Acudiente_correo as Estudiante_Acudiente_correo,
            e.CoordinadorCancelaciones_codigo as Estudiante_CoordinadorCancelaciones_codigo,
        
            a.nombre as Acudiente_nombre,
            a.correo as Acudiente_correo,
        
            as.nemonico as Asignatura_nemonico,
            as.nombre as Asignatura_nombre,
            as.programa as Asignatura_programa,
            as.cancelada as Asignatura_cancelada,
            as.perdida as Asignatura_perdida,
        
            co.nombre as Coodinador_nombre,
            co.codigo as Coodinador_codigo

        FROM  ConsejeroAcademico  as c left join Estudiante as e on e.ConsejeroAcademico_codigo=c.codigo left join Acudiente as a on a.correo=e.Acudiente_correo left join CoordinadorCancelaciones as co on co.codigo=e.CoordinadorCancelaciones_codigo left join Solicitud as s on s.Estudiante_codigo=e.codigo left join Asignatura as as on as.nemonico=s.Asignatura_Cancelar;
    </select>
    
    <resultMap type='ConsejeroAcademico' id='ConsejeroResult' >
        <id property='codigo' column='codigo'/> 
        <result property='nombre' column='nombre'/>
        <collection property="estudiantes" ofType="Estudiante" columnPrefix="Estudiante_" resultMap="EstudianteResult"/> 
    </resultMap>
    
    <resultMap type='Acudiente' id='AcudienteResult' >
        <id property='correo' column='correo'/> 
        <result property='nombre' column='nombre'/>
        <collection property="estudiantes" ofType="Estudiante" columnPrefix="Estudiante_" resultMap="EstudianteResult"/> 
    </resultMap>
    
    <resultMap type='CoordinadorCancelaciones' id='CoordinadorResult' >
        <id property='codigo' column='codigo'/> 
        <result property='nombre' column='nombre'/>
        <collection property="estudiantes" ofType="Estudiante" columnPrefix="Estudiante_" resultMap="EstudianteResult"/> 
    </resultMap>
    
    <resultMap type='Solicitud' id='SolicitudResult' >
        <id property='numero' column='numero'/> 
        <result property='justificacion' column='justificacion'/>
        <result property='impacto' column='impacto'/>
        <result property='proyeccion' column='proyeccion'/>
        <result property='comentariosConsejero' column='comentarios'/>
        <result property='estado' column='estado'/>
        <result property='acuseRecibo' column='AcuseRecibo'/>
        <result property='avalConsejero' column='avalConsejero'/>
        <association property="asignatura" javaType="Asignatura" columnPrefix="Asignatura_" resultMap="AsignaturaResult" />
        
    </resultMap>
    
    <resultMap type='Asignatura' id='AsignaturaResult' >
        <id property='nemonico' column='nemonico'/> 
        <result property='nombre' column='nombre'/>
        <result property='programa' column='programa'/>
        <result property='numCancelaciones' column='cancelada'/>
        <result property='numPerdidas' column='perdida'/>
    </resultMap>
    
    <resultMap type='Estudiante' id='EstudianteResult' >
        <id property='codigo' column='codigo'/> 
        <result property='nombre' column='nombre'/>
        <result property='numeroPlanEstudio' column='numeroPlanEstudio'/>
        <result property='numeroMatriculas' column='numeroMatriculas'/>
        <result property='correo' column='correo'/>
        <result property='programa' column='programa'/>
        <result property='doblePrograma' column='doblePrograma'/>
        <association property="acudiente" javaType="Acudiente" columnPrefix="Acudiente_" resultMap="AcudienteResult" />
        <collection property="solicitudes" ofType="Solicitud" columnPrefix="Solicitud_" resultMap="SolicitudResult"/> 
    </resultMap>
    
    
    
    
</mapper>
